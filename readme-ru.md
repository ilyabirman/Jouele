# Жуэль
Жуэль — простой и красивый плеер для веба.

[Страница проекта](http://ilyabirman.ru/projects/jouele/)

## Знаменитая установка в 2 шага
```html
<!-- Подключите на страницу jQuery, необходимый для работы Жуэля -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Подключите Жуэль: JS и CSS -->
<script src="https://unpkg.com/jouele/dist/jouele.js"></script>
<link href="https://unpkg.com/jouele/dist/jouele.css" rel="stylesheet"/>
```
<sub>howler.js, необходимый для работы Жуэля, уже включен в собранный файл Жуэля, так что вам не нужно подключать его отдельно.</sub>

## Доступно в npm
`npm install ilyabirman-jouele`

## Как использовать

### Одиночный трек
Каждая ссылка, имеющая атрибут `href` и класс `jouele`, превратится в плеер МП3-файла, на который она ведёт. Например:
```html
<a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20News.mp3" class="jouele">Ilya Birman: News</a>
```

### Плейлисты
Добавление класса `jouele-playlist` к любому элементу, внутри которого лежат ссылки с классом `jouele`, создаст плейлист из соответствующих этим ссылкам файлов. Например:
```html
<div class="jouele-playlist">
    <p><a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20The%20Endgame.mp3" class="jouele">The Endgame</a></p>
    <p><a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20Tastes%20Like%20Steel.mp3" class="jouele">Tastes Like Steel</a></p>
    <p><a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20Glass.mp3" class="jouele">Glass</a></p>
    <p><a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20I%20Will%20Always.mp3" class="jouele">I Will Always</a></p>
</div>
```

Обратитесь к файлу [`jouele/example.html`](jouele/example.html), чтобы увидеть дополнительные примеры использования.

## Расширенные возможности

### data-атрибуты
Добавление некоторых data-атрибутов изменит поведение или внешний вид плеера (или плейлиста).

#### `data-repeat`
Применяется к одному треку или к плейлисту.  
Тип: `boolean`  
По умолчанию: `false`

Определяет, нужно ли повторять воспроизведение трека или плейлиста после окончания последнего трека в нём.

#### `data-length`
Тип: `string`  
По умолчанию: `0`

Указывает общую продолжительность трека, чтобы время показывалось сразу, а не после нажатия кнопки «плей».
Примеры для трека длительностью 9 минут 54 секунды: `data-length="9:54"`, `data-length="594"`

#### `data-space-control`
Тип: `boolean`  
По умолчанию: `false`

Определяет глобально, нужно ли перехватывать нажатие пробела и запускать/останавливать воспроизведение трека.
Достаточно лишь однажды «включить» этот дата-атрибут у любого плейлиста или любого экземпляра плеера, чтобы настройка действовала на все плееры на странице.

#### `data-hide-timeline-on-pause`
Тип: `boolean`  
По умолчанию: `false`

Определяет, нужно ли скрывать таймлайн трека, когда он не играет.

#### `data-first`
Тип: `boolean`  

Определяет, что именно этот трек должен заиграть по первому нажатию пробела на странице при включенной опции `data-space-control`.

### Скин
Добавление класса `jouele-skin-dark` к ссылке, которая будет инициализирована Жуэлем, включает предустановленный «тёмный» скин. Например:
```html
<a href="http://audio.ilyabirman.ru/Ilya%20Birman%20-%20News.mp3" class="jouele jouele-skin-dark">Ilya Birman: News</a>
```

Разработчик может создать собственный скин, изучив CSS-файл [`src/jouele.skin.css`](src/jouele.skin.css).
Для подключения нового скина нужно следующее:
- Заменить в `jouele.skin.css` все селекторы `jouele-skin-dark` на новое название, сохранив паттерн `jouele-skin-{название_скина}` (например, `jouele-skin-blue`).
- Заменить цвета на необходимые вам.
- Добавить в ссылку, которая будет инициализирована Жуэлем, класс `jouele-skin-{название_скина}`.
- Подключить на сайт исправленный файл `jouele.skin.css` после `jouele.css`.

## Динамическая инициализация

#### `$(selector).jouele()`
Превращает ссылку `selector` в плеер. Возвращает jQuery-объект, к которому применялся метод — `$(selector)`.
Если всё прошло хорошо, то в поле `data` этого же jQuery-объекта `$(selector)` добавится дополнительное свойство `jouele`, в котором будет лежать экземпляр плеера `Jouele` (с этим экземпляром и работает весь API, [см. ниже](#api)). DOM-элемент `selector` будет исключен из DOM при помощи `jQuery.detach()`.  
Блок плеера с классом `jouele` будет добавлен в DOM на место исключённого элемента и будет также иметь в своём `data.jouele` экземпляр плеера `Jouele`.

## Глобальный объект `$.Jouele`
Объект содержит в себе 2 свойства и один расширенный объект опций:

#### `$.Jouele.playlist`
Тип: `array`  
По умолчанию: `[]`

Массив со всеми плейлистами на странице, расположенные в порядке их размещения в DOM. Внутри каждого плейлиста — набор экземпляров плеера `Jouele`.  
Пустой массив, если активных экземпляров на странице нет.

#### `$.Jouele.lastPlayed`
Тип: `Jouele`  
По умолчанию: `null`

Ссылка на последний игравший (или играющий сейчас) экземпляр плеера `Jouele`.  
`null`, если ничего ещё не играло или последний игравший трек был уничтожен при помощи метода `destroy`.

#### `$.Jouele.options`
Тип: `object`

Объект с набором свойств: `pauseOnSpace` (по умолчанию `false`), `playOnSpace` (по умолчанию `false`), `scrollOnSpace` (по умолчанию `true`).
Ручное переключение каждой опции позволит глобально изменить поведение пробела для управления воспроизведением и скроллом.

## API
Рекомендованный способ обращения к API:
```javascript
var JoueleInstance = $(".jouele").data("jouele") // Получить экземпляр Jouele
```

### Методы API

#### `JoueleInstance.play()` или `$(".jouele").jouele("play")`
Начинает воспроизведение трека. Возвращает экземпляр плеера `Jouele`.

#### `JoueleInstance.pause()` или `$(".jouele").jouele("pause")`
Останавливает воспроизведение трека. Возвращает экземпляр плеера `Jouele`.

#### `JoueleInstance.destroy()` или `$(".jouele").jouele("destroy")`
Уничтожает плеер, возвращая в DOM-дерево ссылку, из которой он был создан. Возвращает jQuery-объект ссылки.

### Свойства API

#### `JoueleInstance.$link`
Тип: `jQuery-объект`

Хранит jQuery-объект, из которого был создан плеер.

#### `JoueleInstance.$playlist`
Тип: `jQuery-объект`

Хранит ссылку на jQuery-объект плейлиста, внутри которого находится плеер.

#### `JoueleInstance.playlist`
Тип: `array`

Хранит ссылку на элемент массива `$.Jouele.playlist` — плейлист, внутри которого находится трек.

#### `JoueleInstance.isPlaying`
Тип: `boolean`

Указывает, играет ли сейчас этот трек.

#### `JoueleInstance.isPlayed`
Тип: `boolean`

Указывает, запускался ли этот трек.

#### `JoueleInstance.totalTime`
Тип: `number`

Хранит длительность трека в секундах. Может быть дробным.

## Титры
- Идея и разработка — [Илья Бирман](http://ilyabirman.ru)
- Разработка — [Евгений Лазарев](http://eugene-lazarev.ru)
- Перевод документации на английский язык — [Александра Годун](https://github.com/misterblblbl)
- [howler.js](https://howlerjs.com/)

## Лицензия
[MIT License](license.md)
