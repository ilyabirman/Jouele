!function(e){"use strict";var t=!1,o=function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==(e.firstChild&&e.firstChild.namespaceURI)},n=function(){return("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||o())&&(t=!0),this},i=function(e){if("number"!=typeof e)return e;var t=Math.round(e)%60,o=(Math.round(e)-t)%3600/60,n=(Math.round(e)-t-60*o)/3600;return(n?n+":":"")+(n&&10>o?"0"+o:o)+":"+(10>t?"0"+t:t)},l=function(e){if("number"==typeof e)return e;for(var t=e.split(":").reverse(),o=0,n=0;n<t.length;n++)o+=t[n]*Math.pow(60,n);return o},a=function(e,t){if(e.preloaderTimeout||e.isSeeking||!e.waitForLoad)return e;var t=t||50;return e.preloaderTimeout=setTimeout(function(){return e.isSeeking?(e.preloaderTimeout=null,e):void e.$container.find(".jouele-play-lift").addClass("jouele-play-lift_buffering")},t),e},s=function(e){return e.preloaderTimeout?(clearTimeout(e.preloaderTimeout),e.preloaderTimeout=null,e.$container.find(".jouele-play-lift").removeClass("jouele-play-lift_buffering"),e):e},u=function(e,t){if(e.fullyLoaded&&e.totalTime||!e.isPlayed)return e;var o=Math.round(t.seekPercent);return o>=100?(e.fullyLoaded=!0,e.totalTime=t.duration):o>0?e.totalTime=t.duration:e.totalTime=0,e.$container.find(".jouele-load-bar").css({width:Math.floor(Math.min(100,o))+"%"}),e},r=function(e,t){return e.seekTime&&!e.isSeeking?e:(e.$container.find(".jouele-play-lift").css("left",t+"%"),e.$container.find(".jouele-play-bar").css("width",t+"%"),e)},d=function(e,t){if(e.totalTime<=0&&!e.options.length)return e;var o="";return e.fullyLoaded&&e.totalTime?e.fullTimeDisplayed||(o=i(e.totalTime),e.$container.find(".jouele-total-time").html(o),e.fullTimeDisplayed=!0):e.options.length?(o=i(l(e.options.length)),e.$container.find(".jouele-total-time").html(o)):(o=e.options.length?e.options.length:'<span class="jouele-total-time__approx">~</span>'+i(e.totalTime),e.$container.find(".jouele-total-time").html(o)),(e.isPlaying||e.waitForLoad)&&(e.totalTime||e.seekTime)&&e.$container.find(".jouele-play-time").html(i(e.seekTime?e.seekTime:t)),e},c=function(t,o){var n=o.toFixed(2);return 0>n?n=0:n>100&&(n=100),t.isPlaying||(e.Jouele.lastPlayed!==t&&(e.Jouele.lastPlayed=t,e.Jouele("setMedia",t)),t.pseudoPlay()),e.Jouele.$jPlayer.jPlayer("playHead",n),r(t,n),a(t),t.waitForLoad=!0,t.fullTimeDisplayed?(t.seekTime=t.totalTime/100*n,d(t,t.seekTime)):t.options.length?(t.seekTime=l(t.options.length)/100*n,d(t,t.seekTime)):t.seekTime=.01,t};e.fn.jouele=function(t){return this.each(function(){var o=e(this),n=o.attr("class"),i=n?n.indexOf("jouele-skin-"):-1,l=o.data("jouele"),a="";if(l){if("string"==typeof t&&"undefined"!=typeof l[t]&&e.isFunction(l[t]))return l[t]()}else i>0&&(a=n.substr(i+12,n.indexOf(" ",i)>0?n.indexOf(" ",i):n.length)),new p(o,e.extend({},e.fn.jouele.defaults,t,o.data(),{skin:a}))})},e.fn.jouele.defaults={length:0,playFrom:0,scrollOnSpace:!1,pauseOnSpace:!0,playOnSpace:!0,hideTimelineOnPause:!1,skin:""};var p=function(e,t){this.version="2.1.0",this.$link=e,this.options=t,this.isPlaying=!1,this.isPlayed=!1,this.totalTime=0,this.fullyLoaded=!1,this.fullTimeDisplayed=!1,this.waitForLoad=!1,this.seekTime=0,this.preloaderTimeout=null,this.isSeeking=!1,this.playFrom=0,this.init()};p.prototype.init=function(){e.Jouele.playlist.push(this),this.checkOptions(),this.createDOM(),e.Jouele.$jPlayer?e.Jouele("_jPlayerReady",this):e.Jouele("init",this),this.bindEvents(),this.insertDOM()},p.prototype.destroy=function(){var t=this,o=this.$container.attr("id");return e.each(e.Jouele.playlist,function(o,n){n===t&&e.Jouele.playlist.splice(o,1),e.Jouele.lastPlayed===t&&(e.Jouele.lastPlayed=null)}),this.$container.after(this.$link).remove(),e(document).off("."+o),this.$link.removeData("jouele"),this.$link},p.prototype.pause=function(){return s(this),this.seekTime||(this.waitForLoad=!1),"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&(this.isPlaying||this.waitForLoad)&&(this.isPlaying=!1,this.waitForLoad=!1,this.$jPlayer.jPlayer("pause")),this.isPlaying||this.pseudoPause(),this},p.prototype.pseudoPause=function(){this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},p.prototype.stop=function(){return"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&this.isPlaying&&this.$jPlayer.jPlayer("stop"),this},p.prototype.play=function(){if(e.Jouele.lastPlayed!==this){if(this.playFrom)return a(this),c(this,this.totalTime?this.playFrom/(this.totalTime/100):0),this;e.Jouele.lastPlayed=this,e.Jouele("setMedia",this)}return a(this,this.seekTime?!1:500),this.isPlayed=!0,"undefined"!=typeof this.$jPlayer&&this.$jPlayer.jPlayer&&(this.isPlaying||this.$jPlayer.jPlayer("play")),this},p.prototype.pseudoPlay=function(){e(document).trigger("jouele-pause",this),this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden"),this.isPlayed=!0},p.prototype.onPause=function(){this.isPlaying=!1,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_play").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden")},p.prototype.onStop=function(){this.isPlaying=!1,this.seekTime=0,this.isSeeking=!1,this.waitForLoad=!1,this.$container.removeClass("jouele-status-playing")},p.prototype.onPlay=function(){e(document).trigger("jouele-pause",this),this.$container.addClass("jouele-status-playing"),this.$container.find(".jouele-control-button-icon_pause").removeClass("jouele-hidden"),this.$container.find(".jouele-control-button-icon_play").addClass("jouele-hidden"),this.waitForLoad=!1,this.isPlaying=!0,this.isPlayed=!0,e.Jouele.lastPlayed=this},p.prototype.checkOptions=function(){parseInt(this.options.length)||(this.options.length=0)},p.prototype.createDOM=function(){var o=e(document.createElement("div")),n=e(document.createElement("div")),a=e(document.createElement("div")),s=e(document.createElement("div")),u=this.$link.text(),r=this,d=function(){return[e(document.createElement("div")).addClass("jouele-time").append(e(document.createElement("div")).addClass("jouele-play-time").text(r.options.length?"0:00":""),e(document.createElement("div")).addClass("jouele-total-time").text(r.options.length?i(l(r.options.length)):"")),e(document.createElement("div")).addClass("jouele-control").append(e(document.createElement("div")).addClass("jouele-control-button"+(t?"":" jouele-control-button_nosvg")).append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_unavailable").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><g class="jouele-svg-color"><path d="m4 6.7l3.8 3.7-3.8 2.1z"/><path d="m.2 2.2l.6-.5 11 11.1-.5.5z"/><path d="m4 4.3v-.8l8 4.5-2.7 1.5z"/></g></svg>':""),e(document.createElement("a")).attr("href",r.$link.attr("href")).addClass("jouele-control-link jouele-hidden").append(e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_play jouele-hidden").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><path class="jouele-svg-color" d="m4 3.5l8 4.5-8 4.5z"/></svg>':""),e(document.createElement("span")).addClass("jouele-control-button-icon jouele-control-button-icon_pause jouele-hidden").html(t?'<svg class="jouele-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16"><path class="jouele-svg-color" d="m4 3.5l8 4.5-8 4.5z"/></svg>':""))),e(document.createElement("div")).addClass("jouele-control-text").html(u))]},c=function(){return e(document.createElement("div")).addClass("jouele-mine").append(e(document.createElement("div")).addClass("jouele-mine-bar"),e(document.createElement("div")).addClass("jouele-load-bar jouele-hidden"),e(document.createElement("div")).addClass("jouele-play-bar"),e(document.createElement("div")).addClass("jouele-play-lift jouele-hidden").append())};return this.$container=o.data("jouele",this).addClass("jouele"+(this.options.hideTimelineOnPause?" jouele_timeline_hide":"")+(this.options.skin?" jouele-skin-"+this.options.skin:"")).attr("id","jouele-ui-zone-"+(1e3+Math.round(8999*Math.random()))).append(n.addClass("jouele-invisible-object"),a.addClass("jouele-info-area").append(d()),s.addClass("jouele-progress-area").append(c())),this},p.prototype.insertDOM=function(){return this.$link.after(this.$container),this.$link.data("jouele",this),this.$link.detach(),this},p.prototype.bindEvents=function(){var t=this,o=t.$container.attr("id");return e(document).on("jouele-pause."+o,function(e,o){t!==o&&t.pause()}),this},e.Jouele=function(t,o){this.init=function(t){var o=this,n=e("<div>");e(document).on("keydown.jouele",function(t){32===t.keyCode&&e.Jouele.lastPlayed&&(e.Jouele.lastPlayed.isPlaying?e.Jouele.lastPlayed.options.pauseOnSpace&&(e.Jouele.lastPlayed.options.scrollOnSpace||(t.stopPropagation(),t.preventDefault()),e.Jouele.lastPlayed.pause()):e.Jouele.lastPlayed.options.playOnSpace&&(e.Jouele.lastPlayed.options.scrollOnSpace||(t.stopPropagation(),t.preventDefault()),e.Jouele.lastPlayed.play()))}),e.Jouele.$jPlayer=n.jPlayer({solution:"html",wmode:"window",preload:"metadata",supplied:"mp3",volume:1,ready:function(){o._jPlayerReady(t)}})},this.setMedia=function(t){var o=this;t.$jPlayer.off(e.jPlayer.event.pause).on(e.jPlayer.event.pause,function(){o._jPlayerPause(t)}),t.$jPlayer.off(e.jPlayer.event.stop).on(e.jPlayer.event.stop,function(){o._jPlayerStop(t)}),t.$jPlayer.off(e.jPlayer.event.play).on(e.jPlayer.event.play,function(){o._jPlayerPlay(t)}),t.$jPlayer.off(e.jPlayer.event.progress).on(e.jPlayer.event.progress,function(e){o._jPlayerProgress(t,e)}),t.$jPlayer.off(e.jPlayer.event.timeupdate).on(e.jPlayer.event.timeupdate,function(e){o._jPlayerTimeupdate(t,e)}),e.Jouele.$jPlayer.jPlayer("setMedia",{mp3:t.$link.attr("href")})},this._jPlayerReady=function(t){var o=t.$container.attr("id");t.$jPlayer=e.Jouele.$jPlayer,t.totalTime=l(t.options.length),t.playFrom=l(t.options.playFrom),t.$container.find(".jouele-hidden").removeClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_unavailable").addClass("jouele-hidden"),t.$container.find(".jouele-control-button-icon_pause").addClass("jouele-hidden"),t.$container.find(".jouele-control-link").off("click.jouele").on("click.jouele",function(e){e.preventDefault(),e.stopPropagation()}),t.$container.find(".jouele-control-button-icon_play").off("click.jouele").on("click.jouele",function(){t.waitForLoad=!0,t.pseudoPlay.call(t),t.play.call(t)}),t.$container.find(".jouele-control-button-icon_pause").off("click.jouele").on("click.jouele",function(){t.pseudoPause.call(t),t.pause.call(t)}),t.$container.find(".jouele-mine").off("mousedown."+o).on("mousedown."+o,function(n){if(1!==n.which)return!1;n.stopPropagation(),n.preventDefault(),t.isSeeking=!0;var i=e(this),l=(n.pageX-i.offset().left)/i.width()*100;e(document).off("mouseup."+o).one("mouseup."+o,function(){e(document).off("mousemove."+o),t.isSeeking=!1,a(t)}),e(document).off("mousemove."+o).on("mousemove."+o,function(e){if(e.stopPropagation(),e.preventDefault(),!t.isSeeking)return!1;var o=(e.pageX-i.offset().left)/i.width()*100;c(t,o)}),c(t,l)})},this._jPlayerPause=function(e){e.onPause.call(e)},this._jPlayerStop=function(e){e.onStop.call(e)},this._jPlayerPlay=function(e){e.onPlay.call(e)},this._jPlayerProgress=function(e,t){u(e,t.jPlayer.status),d(e,t.jPlayer.status.currentTime)},this._jPlayerTimeupdate=function(e,t){u(e,t.jPlayer.status),d(e,t.jPlayer.status.currentTime),r(e,t.jPlayer.status.currentPercentAbsolute.toFixed(2)),e.playFrom=t.jPlayer.status.currentTime,s(e),e.waitForLoad&&(e.waitForLoad=!1,e.seekTime=0,e.play(),s(e))},"string"==typeof t&&e.isFunction(this[t])&&this[t](o)},e.Jouele.playlist=[],e.Jouele.lastPlayed=null,e.Jouele.$jPlayer=null,n();var h=function(){e(".jouele").jouele()};e(h)}(jQuery);